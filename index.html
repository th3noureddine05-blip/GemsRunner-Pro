<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Master 2026 - Ultimate Edition</title>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1757426516434712" crossorigin="anonymous"></script>
    <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
    
    <script>
      window.googletag = window.googletag || {cmd: []};
      let interstitialSlot, rewardedSlot, appOpenSlot;

      googletag.cmd.push(function() {
        // 1. Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„ÙØªØ­ (App Open)
        appOpenSlot = googletag.defineOutOfPageSlot(
          '/1757426516434712/9028872112', 
          googletag.enums.OutOfPageFormat.APP_OPEN);

        // 2. Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø¨ÙŠÙ†ÙŠ (Interstitial)
        interstitialSlot = googletag.defineOutOfPageSlot(
          '/1757426516434712/9455800418', 
          googletag.enums.OutOfPageFormat.INTERSTITIAL);

        // 3. Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© (Rewarded)
        rewardedSlot = googletag.defineOutOfPageSlot(
          '/1757426516434712/8717735132', 
          googletag.enums.OutOfPageFormat.REWARDED);

        if (appOpenSlot) appOpenSlot.addService(googletag.pubads());
        if (interstitialSlot) interstitialSlot.addService(googletag.pubads());
        if (rewardedSlot) rewardedSlot.addService(googletag.pubads());

        googletag.enableServices();
      });
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap');
        body { margin: 0; background: #010205; overflow: hidden; touch-action: none; font-family: 'Orbitron', sans-serif; color: #fff; }
        canvas { display: block; filter: contrast(1.2) brightness(1.1); }
        #master-overlay { position: absolute; width: 100%; height: 100%; background: radial-gradient(circle, rgba(0,255,200,0.1) 0%, rgba(0,0,0,1) 80%); display: flex; align-items: center; justify-content: center; z-index: 100; backdrop-filter: blur(8px); }
        .glass-panel { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(0, 255, 200, 0.3); padding: 30px; border-radius: 30px; width: 85%; max-width: 400px; text-align: center; box-shadow: 0 0 40px rgba(0, 255, 200, 0.1); }
        h1 { font-size: 2rem; margin: 0 0 20px 0; color: #00ffc8; text-shadow: 0 0 20px #00ffc8; }
        .start-btn { width: 100%; padding: 15px; margin-top: 15px; border: none; border-radius: 12px; background: #00ffc8; color: #000; font-weight: 900; cursor: pointer; box-shadow: 0 0 15px #00ffc8; transition: 0.3s; }
        .start-btn:hover { transform: scale(1.05); }
        #stats-bar { position: absolute; top: 0; width: 100%; padding: 20px; display: none; justify-content: space-around; z-index: 50; background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent); }
        #ad-banner-fixed { position: fixed; bottom: 0; width: 100%; display: flex; justify-content: center; z-index: 200; background: rgba(0,0,0,0.6); padding: 5px 0; }
    </style>
</head>
<body>

    <div id="master-overlay">
        <div class="glass-panel">
            <h1 id="menu-title">NEON MASTER</h1>
            <p style="color: #ffcc00; font-weight: 900;">Ø§Ù„Ø¬ÙˆØ§Ù‡Ø±: <span id="gems-total">0</span></p>
            
            <button class="start-btn" style="background:#ffcc00; margin-bottom:10px" onclick="showRewardedAd()">ğŸ“º ÙÙŠØ¯ÙŠÙˆ = 20 Ø¬ÙˆÙ‡Ø±Ø© Ù…Ø¬Ø§Ù†ÙŠØ©</button>
            
            <button class="start-btn" onclick="initGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
        </div>
    </div>

    <div id="stats-bar">
        <div style="color: #ffcc00; font-weight: 900;">GEMS: <span id="disp-gems">0</span></div>
        <div id="disp-lives" style="letter-spacing: 5px;">â¤ï¸â¤ï¸â¤ï¸</div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <div id="ad-banner-fixed">
        <ins class="adsbygoogle"
             style="display:inline-block;width:320px;height:50px"
             data-ad-client="ca-pub-1757426516434712"
             data-ad-slot="9455800418"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let active = false, score = 0, lives = 3, deathCount = 0;
        let totalGems = parseInt(localStorage.getItem("gems_2026")) || 0;

        // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„ÙØªØ­ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        window.onload = function() {
            googletag.cmd.push(function() { googletag.display(appOpenSlot); });
            updateUI();
        };

        function updateUI() {
            document.getElementById("gems-total").innerText = totalGems;
            document.getElementById("disp-gems").innerText = totalGems;
        }

        // Ø¯Ø§Ù„Ø© Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©
        function showRewardedAd() {
            googletag.cmd.push(function() {
                googletag.display(rewardedSlot);
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² Ø¨Ø¹Ø¯ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†
                googletag.pubads().addEventListener('rewardedSlotReady', function() {
                    totalGems += 20;
                    localStorage.setItem("gems_2026", totalGems);
                    updateUI();
                    alert("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© 20 Ø¬ÙˆÙ‡Ø±Ø© Ø¥Ù„Ù‰ Ø±ØµÙŠØ¯Ùƒ! ğŸ’");
                });
            });
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø¨ÙŠÙ†ÙŠ (ÙŠØ¸Ù‡Ø± ÙƒÙ„ 3 Ø®Ø³Ø§Ø±Ø§Øª)
        function showInterstitialAd() {
            if(deathCount % 3 === 0) {
                googletag.cmd.push(function() { googletag.display(interstitialSlot); });
            }
        }

        function initGame() {
            document.getElementById("master-overlay").style.display = "none";
            document.getElementById("stats-bar").style.display = "flex";
            active = true; score = 0; lives = 3; 
            // Ù…Ù†Ø·Ù‚ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ ÙŠÙˆØ¶Ø¹ Ù‡Ù†Ø§
        }

        // ÙŠØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§ØµØ·Ø¯Ø§Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø¨Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚
        function onPlayerHit() {
            lives--;
            document.getElementById("disp-lives").innerText = "â¤ï¸".repeat(lives);
            if(lives <= 0) {
                active = false;
                deathCount++;
                showInterstitialAd();
                document.getElementById("master-overlay").style.display = "flex";
                document.getElementById("menu-title").innerText = "SCORE: " + score;
            }
        }
    </script>
</body>
</html>
